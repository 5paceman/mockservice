{"name":"Mockservice","tagline":"mock方案","body":"mockservice\r\n===========\r\n\r\n> 构造数据服务\r\n\r\n\r\n---------------------------\r\n\r\n## 安装与配置\r\n\r\n- gitup安装 (需要支持git协议)\r\n\r\n> npm install git://github.com/fcfe/mockservice.git\r\n\r\n- 选择npm安装\r\n\r\n> npm install mockservice\r\n\r\n\r\n-- 配置edp服务器\r\n\r\n> 配置方法: 在edp-webserver-config文件中添加如下代码\r\n\r\n```js\r\n    exports.port = 8848;\r\n\r\n    var ms = require('mockservice');\r\n    ms.config({dir: __dirname + '/phoenix/debug'});\r\n\r\n    exports.getLocations = function () {\r\n        return [\r\n            {\r\n                location: /^\\/request.ajax/, \r\n                handler: ms.request({})\r\n            }\r\n        ];\r\n    };\r\n\r\n```\r\n\r\n-- 启动服务器\r\n\r\n> edp ws start\r\n\r\n- 使用edp时建议mocksrvice安装在项目代码上一级目录, 如`F://fengchao/node_modules`\r\n\r\n-- 使用独立mock服务器\r\n\r\n- 如使用独立服务器; 需要全局安装 `npm install mocksrvice -g`; \r\n\r\n    // 进入工作路径\r\n    cd workspace\r\n\r\n    // 启动mock服务器\r\n    mock 8848\r\n\r\n----------------------------\r\n\r\n### 使用说明\r\n\r\n > 启动程序后ms自动扫描目录下所有index.js文件及符合特定规则的文件（如果需要，规则可由ms-config.js文件配置）;\r\n > mock文件不会立即加载；只有请求触发时会加载；且不进行缓存；\r\n \r\n > 测试：启动edp或mock程序；浏览器中测试，或发curl请求\r\n \r\n     http://localhost:8848/request.ajax?path=GET/auth&param={}\r\n     \r\n\r\n-----------------------\r\n\r\n## 构造mock数据规范\r\n\r\n-请求规范\r\n\r\n> 前端代码发送真实请求；请求路径符合request.ajax?path=XXX形式;参数param可以是POST或GET参数\r\nparam符合严格规范的json格式\r\n\r\n- 构造数据代码规范\r\n\r\n> 所有响应request.ajax?path={pathname}&param={object}请求每个pathname对应一个mock文件；mock文件名`/`替换为`_`；\r\n独立mock文件命名为{pkgname}/{pathname}.js;\r\n\r\n- 对应每个接口应该指定一个响应函数；响应函数有固定参数列表(path, param)\r\n- index.js 文件可以定义多个接口的响应函数 (但是不建议写到index文件)\r\n- {pathname}.js 文件只能定义对应pathname的响应函数\r\n\r\n- ms-config.js 文件配置\r\n> ms-config.js 文件可以放到目标文件夹下；只影响当前文件夹或子文件夹下的模块\r\n  暂时只有两个配置项目`cache`表示是否需要缓存模块；`pathRegs`表示匹配服务规则；\r\n  ms-config.js不是必需的；只有默认规则不满足需要时添加该文件即可；\r\n\r\n```js\r\n\r\n    module.exports = {\r\n        \"cache\": false,\r\n        \"pathRegs\": [/\\w+_\\w+/, 'scookie', 'zebra']\r\n    };\r\n\r\n```\r\n------------------------\r\n\r\n### ISSUE todo\r\n\r\n- 构造数据支持简单物料读写逻辑\r\n\r\n- 构造数据模版\r\n\r\n- 构造数据工具方法\r\n\r\n- 构造数据规范\r\n","google":"mockservice","note":"Don't delete this file! It's used internally to help with page regeneration."}